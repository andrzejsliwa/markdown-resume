* 16sep19
** fresh start
Guide: https://github.com/adilapapaya/markdown-resume#feature-development
*** installed composer
Guide: https://getcomposer.org/download/
**** 1) Download the installer
#+BEGIN_SRC 
Jingxuan-VirtualBox% php -r "copy('https://getcomposer.org/installer', 'composer-setup.php');"
#+END_SRC
**** 2) Verify the installer SHA-384
#+BEGIN_SRC 
Jingxuan-VirtualBox% php -r "if (hash_file('SHA384', 'composer-setup.php') === 'e115a8dc7871f15d853148a7fbac7da27d6c0030b848d9b3dc09e2a0388afed865e6a3d6b3c0fad45c48e2b5fc1196ae') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;"
Installer verified
#+END_SRC
**** 3) Run the installer
#+BEGIN_SRC 
Jingxuan-VirtualBox% php composer-setup.php
All settings correct for using Composer
Downloading 1.2.1...

Composer successfully installed to: /home/jing/markdown-resume/composer.phar
Use it: php composer.phar
#+END_SRC
**** 4) Remove the installer
#+BEGIN_SRC 
Jingxuan-VirtualBox% php -r "unlink('composer-setup.php');"
#+END_SRC
*** installed the dependencies

#+BEGIN_SRC 
Jingxuan-VirtualBox% php composer.phar install
Loading composer repositories with package information
Installing dependencies (including require-dev) from lock file
Warning: The lock file is not up to date with the latest changes in composer.json. You may be getting outdated dependencies. Run update to update them.
  - Installing symfony/finder (dev-master 1343b57)
    Cloning 1343b576d1401f4a5117cab4e250201ae348143a

  - Installing symfony/filesystem (dev-master 98e831e)
    Cloning 98e831eac836a0a5911626ce82684155f21d0e4d

  - Installing symfony/console (v2.3.4)
    Loading from cache

  - Installing sebastian/diff (dev-master ac84cfd)
    Cloning ac84cfdec593945f36f24074d6ea17d296e86f76

  - Installing fabpot/php-cs-fixer (v0.4.0)
    Loading from cache

  - Installing indeyets/pake (1.99.3)
    Loading from cache

  - Installing symfony/process (dev-master 8a3edac)
    Cloning 8a3edace8e8aabed8992b993bfc13df3b1e836f2

  - Installing kriswallsmith/assetic (v1.1.2)
    Loading from cache

  - Installing leafo/lessphp (v0.4.0)
    Loading from cache

  - Installing michelf/php-markdown (1.4.0)
    Loading from cache

  - Installing michelf/php-smartypants (1.6.0-beta1)
    Loading from cache

  - Installing mustache/mustache (v2.5.1)
    Loading from cache

  - Installing phpunit/php-token-stream (dev-master 955c24b)
    Cloning 955c24b708f8bfd6a05f303217a8dac3a443d531

  - Installing symfony/yaml (v2.3.4)
    Loading from cache

  - Installing phpunit/php-text-template (1.2.0)
    Loading from cache

  - Installing phpunit/phpunit-mock-objects (1.2.x-dev c39c451)
    Cloning c39c4511c3b007539eb170c32cbc2af49a07351a

  - Installing phpunit/php-timer (1.0.5)
    Loading from cache

  - Installing phpunit/php-file-iterator (1.3.4)
    Loading from cache

  - Installing phpunit/php-code-coverage (1.2.x-dev 6ef2bf3)
    Cloning 6ef2bf3a1c47eca07ea95f0d8a902a6340390b34

  - Installing phpunit/phpunit (3.7.x-dev ae6cefd)
    Cloning ae6cefd7cc84586a5ef27e04bae11ee940ec63dc

  - Installing squizlabs/php_codesniffer (1.5.3)
    Loading from cache

  - Installing sunra/php-simple-html-dom-parser (v1.5.0)
    Loading from cache

  - Installing symfony/config (v2.3.4)
    Loading from cache

  - Installing twig/twig (v1.13.2)
    Loading from cache

symfony/console suggests installing symfony/event-dispatcher ()
indeyets/pake suggests installing phing/phing (2.4.*)
indeyets/pake suggests installing simpletest/simpletest (1.1.*)
kriswallsmith/assetic suggests installing leafo/scssphp (Assetic provides the integration with the scssphp SCSS compiler)
kriswallsmith/assetic suggests installing leafo/scssphp-compass (Assetic provides the integration with the SCSS compass plugin)
kriswallsmith/assetic suggests installing ptachoire/cssembed (Assetic provides the integration with phpcssembed to embed data uris)
phpunit/php-code-coverage suggests installing ext-xdebug (>=2.0.5)
phpunit/phpunit suggests installing phpunit/php-invoker (~1.1)
Generating autoload files
#+END_SRC
*** updated the libraries

#+BEGIN_SRC 
Jingxuan-VirtualBox% php composer.phar update
Loading composer repositories with package information
Updating dependencies (including require-dev)
  - Removing squizlabs/php_codesniffer (1.5.3)
  - Installing squizlabs/php_codesniffer (1.5.x-dev 6f3e42d)
    Cloning 6f3e42d311b882b25b4d409d23a289f4d3b803d5

  - Removing symfony/filesystem (dev-master)
  - Installing symfony/filesystem (2.8.x-dev 44b4995)
    Cloning 44b499521defddf2eae17a18c811bbdae4f98bdf

  - Removing symfony/finder (dev-master)
  - Installing symfony/finder (2.8.x-dev edb9822)
    Cloning edb9822044c046705c1a103e3b275296ae30f252

  - Removing symfony/process (dev-master)
  - Installing symfony/process (2.8.x-dev 05a03ed)
    Cloning 05a03ed27073638658cab9405d99a67dd1014987

  - Removing phpunit/php-file-iterator (1.3.4)
  - Installing phpunit/php-file-iterator (dev-master 6150bf2)
    Cloning 6150bf2c35d3fc379e50c7602b75caceaa39dbf0

  - Removing phpunit/php-text-template (1.2.0)
  - Installing phpunit/php-text-template (1.2.1)
    Loading from cache

  - Removing phpunit/php-timer (1.0.5)
  - Installing phpunit/php-timer (1.0.8)
    Loading from cache

  - Updating phpunit/php-token-stream dev-master (955c24b => cab6c6f)
    Checking out cab6c6fefee93d7b7c3a01292a0fe0884ea66644

  - Updating phpunit/php-code-coverage 1.2.x-dev (6ef2bf3 => fe24668)
    Checking out fe2466802556d3fe4e4d1d58ffd3ccfd0a19be0b

  - Updating phpunit/phpunit 3.7.x-dev (ae6cefd => 38709dc)
    Checking out 38709dc22d519a3d1be46849868aa2ddf822bcf6

Package fabpot/php-cs-fixer is abandoned, you should avoid using it. Use friendsofphp/php-cs-fixer instead.
Writing lock file
Generating autoload files
#+END_SRC

*** Using ~md2resume_dev.php~

#+BEGIN_SRC 
Jingxuan-VirtualBox% php md2resume_dev.php
Markdown Resume Generator version 2.0.10 by Craig Davis

Usage:
  [options] command [arguments]

Options:
  --help           -h Display this help message.
  --quiet          -q Do not output any message.
  --verbose        -v|vv|vvv Increase the verbosity of messages: 1 for normal output, 2 for more verbose output and 3 for debug
  --version        -V Display this application version.
  --ansi              Force ANSI output.
  --no-ansi           Disable ANSI output.
  --no-interaction -n Do not ask any interactive question.

Available commands:
  help         Displays help for a command
  html         Generate an HTML resume from a markdown file
  list         Lists commands
  pdf          Generate a PDF from a markdown file
  selfupdate   Updates md2resume.phar to the latest version.
  stats        Generate a word frequency analysis of your resume
  templates    List available templates
  version      Show current version information
#+END_SRC
** mkdir ./examples/output
** mkdir ./gif
** generated html resume from sample_long.md
#+BEGIN_SRC 
Jingxuan-VirtualBox% php md2resume_dev.php html --template modern examples/source/sample_long.md examples/output/
Wrote resume to: examples/output/sample_long.html
#+END_SRC
[[file:gif/20160919-sample_long-html-a.png][20160919-sample_long-html-a]]
** [master d2cbe14] initial run; added results to repo
#+BEGIN_SRC 
 create mode 100644 examples/output/sample_long.html
 create mode 100644 gif/20160919-sample_long-html-a.png
#+END_SRC
** [master 7c0250e] renamed examples/output/sample_long.html to examples/output/sample_long-a.html
** [master 02808b9] changed h2 font size from 18px to 28px
** generated html resume from sample_long.md
#+BEGIN_SRC 
Jingxuan-VirtualBox% php md2resume_dev.php html --template modern examples/source/sample_long.md examples/output/
Wrote resume to: examples/output/sample_long.html
#+END_SRC
*** no change in h2 font-size
[[file:gif/20160919-sample_long-html-b.png][20160919-sample_long-html-b]]
** renamed latest output file to examples/output/sample_long-b.html
#+BEGIN_SRC 
Jingxuan-VirtualBox%  mv examples/output/sample_long.html examples/output/sample_long-b.html
#+END_SRC
** [master 01a2258] added output files to repo
#+BEGIN_SRC 
 2 files changed, 1213 insertions(+)
 create mode 100644 examples/output/sample_long-b.html
 create mode 100644 gif/20160919-sample_long-html-b.png
#+END_SRC
* 16sep24
** [master 18541f2] updated composer.json to include my details and pointers to my repository
** re-ran the generator but it didn't work -- the change in font size wasn't registered
#+BEGIN_SRC 
Jingxuan-VirtualBox% php md2resume_dev.php html --template modern ~/career/cv.md ~/career/
Wrote resume to: /u/jing/career/cv.html
#+END_SRC
** tried to install the packages required
#+BEGIN_SRC 
Jingxuan-VirtualBox% php composer.phar install
php composer.phar install
Loading composer repositories with package information
Installing dependencies (including require-dev) from lock file
Your requirements could not be resolved to an installable set of packages.

  Problem 1
    - phpunit/php-code-coverage 1.2.x-dev requires phpunit/php-token-stream >=1.1.3,<1.3.0 -> no matching package found.
    - phpunit/php-code-coverage 1.2.x-dev requires phpunit/php-token-stream >=1.1.3,<1.3.0 -> no matching package found.
    - Installation request for phpunit/php-code-coverage 1.2.x-dev -> satisfiable by phpunit/php-code-coverage[1.2.x-dev].

Potential causes:
 - A typo in the package name
 - The package is not available in a stable-enough version according to your minimum-stability setting
   see <https://getcomposer.org/doc/04-schema.md#minimum-stability> for more details.

Read <https://getcomposer.org/doc/articles/troubleshooting.md> for further common problems.
#+END_SRC
** re-installed composer stuff but still didn't work
#+BEGIN_SRC 
Jingxuan-VirtualBox% php -r "copy('https://getcomposer.org/installer', 'composer-setup.php');"
php -r "copy('https://getcomposer.org/installer', 'composer-setup.php');"
Jingxuan-VirtualBox% php -r "if (hash_file('SHA384', 'composer-setup.php') === 'e115a8dc7871f15d853148a7fbac7da27d6c0030b848d9b3dc09e2a0388afed865e6a3d6b3c0fad45c48e2b5fc1196ae') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;"
php -r "if (hash_file('SHA384', 'composer-setup.php') === 'e115a8dc7871f15d853148a7fbac7da27d6c0030b848d9b3dc09e2a0388afed865e6a3d6b3c0fad45c48e2b5fc1196ae') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;"
Installer verified
Jingxuan-VirtualBox% php composer-setup.php
php composer-setup.php
All settings correct for using Composer
Downloading 1.2.1...

Composer successfully installed to: /home/jing/markdown-resume/composer.phar
Use it: php composer.phar
Jingxuan-VirtualBox% php -r "unlink('composer-setup.php');"
php -r "unlink('composer-setup.php');"
Jingxuan-VirtualBox% php composer.phar install
php composer.phar install
Loading composer repositories with package information
Installing dependencies (including require-dev) from lock file
Your requirements could not be resolved to an installable set of packages.

  Problem 1
    - phpunit/php-code-coverage 1.2.x-dev requires phpunit/php-token-stream >=1.1.3,<1.3.0 -> no matching package found.
    - phpunit/php-code-coverage 1.2.x-dev requires phpunit/php-token-stream >=1.1.3,<1.3.0 -> no matching package found.
    - Installation request for phpunit/php-code-coverage 1.2.x-dev -> satisfiable by phpunit/php-code-coverage[1.2.x-dev].

Potential causes:
 - A typo in the package name
 - The package is not available in a stable-enough version according to your minimum-stability setting
   see <https://getcomposer.org/doc/04-schema.md#minimum-stability> for more details.

Read <https://getcomposer.org/doc/articles/troubleshooting.md> for further common problems.
Jingxuan-VirtualBox% 
#+END_SRC
** tried to update composer
#+BEGIN_SRC 
Jingxuan-VirtualBox% php composer.phar selfupdate
You are already using composer version 1.2.1 (stable channel).
#+END_SRC
** looks like updating the dependencies first, before installing the software, might be the solution
#+BEGIN_SRC 
Jingxuan-VirtualBox% php composer.phar update
Loading composer repositories with package information
Updating dependencies (including require-dev)
  - Updating phpunit/php-token-stream (dev-master cab6c6f => 1.2.2)
    Checking out ad4e1e23ae01b483c16f600ff1bebec184588e32

Package fabpot/php-cs-fixer is abandoned, you should avoid using it. Use friendsofphp/php-cs-fixer instead.
Writing lock file
Generating autoload files
#+END_SRC
** now it says that there is nothing to install or update!
#+BEGIN_SRC 
Jingxuan-VirtualBox% php composer.phar install
Loading composer repositories with package information
Installing dependencies (including require-dev) from lock file
Nothing to install or update
Package fabpot/php-cs-fixer is abandoned, you should avoid using it. Use friendsofphp/php-cs-fixer instead.
Generating autoload files
#+END_SRC

*** the error was not in actually installing the packages but finding a set of packages that are compatible with each other to install!

- it makes sense now -- the packages could not be installed because the dependencies were out of sync (in terms of compatibility?)
- after updating the dependencies, which showed that php-token-stream is being updated (in line with the compatibility issues before when tried to install the packages), it was showed that there was no packages to be installed (before I had already installed them previously)
** [master 1200c16] updated requirement for php-cs-fixer fromfabpot/php-cs-fixer to friendsofphp/php-cs-fixer
** update the dependencies again
#+BEGIN_SRC 
Jingxuan-VirtualBox% php composer.phar update
Loading composer repositories with package information
Updating dependencies (including require-dev)
  - Removing fabpot/php-cs-fixer (v0.4.0)
  - Installing friendsofphp/php-cs-fixer (v0.4.0)
    Downloading: 100%

Writing lock file
Generating autoload files
#+END_SRC
** install the packages again
#+BEGIN_SRC 
Jingxuan-VirtualBox% php composer.phar install
Loading composer repositories with package information
Installing dependencies (including require-dev) from lock file
Nothing to install or update
Generating autoload files
#+END_SRC
** tried to generate a new cv but the changes were registered
#+BEGIN_SRC 
Jingxuan-VirtualBox% php md2resume_dev.php html --template modern ~/career/cv.md ~/career/
Wrote resume to: /u/jing/career/cv.html
#+END_SRC
** [master e40effe] changed h2 font-size back to 18px but color to red
** generated a new cv but the changes were not what i expected!
#+BEGIN_SRC 
Jingxuan-VirtualBox% php md2resume_dev.php html --template modern ~/career/cv.md ~/career/
Wrote resume to: /u/jing/career/cv.html
#+END_SRC
*** both h2 color and font-size were changed, although i had already changed the font-size back to 18px...
[[file:gif/20160924-cv-a][20160924-cv-a]]
*** as expected the pen-ultimate declaration of h2 is exactly the same as what declared in resume.css
#+BEGIN_SRC 
h2 {
  margin: 0em 0em 1em;
  padding: 0;
  font-size: 18px;
  font-style: italic;
  letter-spacing: -1px;
  font-weight: normal;
  color: red;
}
#+END_SRC
*** however, there's an additional declaration of h2 from, I'm guessing, the github repo (i.e. pushed changes), or another, as yet unknown, css file
#+BEGIN_SRC 
h2 {
  margin: 0em 0em 1em;
  padding: 0;
  font-size: 28px;
  font-style: italic;
  letter-spacing: -1px;
  font-weight: normal;
}
#+END_SRC

- the second conjecture seems unlikely as changing the font-size to 28px was only done in resume.css
- I'm guessing now that this css came from the online repo?

** re-generated the html cv
#+BEGIN_SRC 
Jingxuan-VirtualBox% php md2resume_dev.php html --template modern ~/career/cv.md ~/career/
Wrote resume to: /u/jing/career/cv.html
#+END_SRC
*** still the same -- 28 px h2 and red in color
[[file:gif/20160924-cv-b.png][20160924-cv-b]]
** pushed and try generating again
#+BEGIN_SRC 
Jingxuan-VirtualBox% php md2resume_dev.php html --template modern ~/career/cv.md ~/career/
Wrote resume to: /u/jing/career/cv.html
#+END_SRC
*** nope, still the same -- h2 28 px and red in color when i'm expecting h2 18px
[[file:gif/20160924-cv-c.png][20160924-cv-c]]
- wondering where the final css comes from?
** investigating how the command to generate the cv works
*** looks like the css is first stored in index.html before pre-pending it to the html generated of the cv
see: [[file:src/Resume/Command/HtmlCommand.php::$templateIndexPath%20=%20join(DIRECTORY_SEPARATOR,%20array($templatePath,%20'index.html'));]]
*** generating the pdf involves generating the html file first using the generateHtml() function in HtmlCommand.php
see: [[file:src/Resume/Command/PdfCommand.php::$rendered%20=%20$this->generateHtml($source,%20$template,%20false);]]
*** I suspect that the sequence at which the css files are concatenated are determined by the usort() function here
see: [[file:src/Resume/Command/HtmlCommand.php::usort($assets,%20function%20(FileAsset%20$a,%20FileAsset%20$b)%20{]]

#+BEGIN_SRC
strcmp()

Returns < 0 if str1 is less than str2; > 0 if str1 is greater than str2, and 0 if they are equal. 
#+END_SRC
- Adila is right -- css file concatenation sequence is probably by alphabetical order

#+BEGIN_QUOTE
What the script does is replace {{{style}}} with the concatenated css files in the css folder. I think it does this in alphabetical order (element.less --> normalize.css --> pdf.css --> resume.css --> screen.css) so if you want to try and hack your way around this, you could also add a zzz.css file in your css/ folder. Since zzz.css will get concatenated last, it should overwrite everything that comes before it. -- Adila
#+END_QUOTE
** AH I think the extra h2 declaration is coming from the history file!!
*** grep for 28px
#+BEGIN_SRC 
Jingxuan-VirtualBox% cd templates
Jingxuan-VirtualBox% grep -rni "28px" .
./modern/css/resume.css~:83:    font-size: 28px;
#+END_SRC
- the command likely took the whole dir into consideration so it's likely that resume.css~ also got concatenated!!
** deleted resume.css~ and trying again
** removed all the auto-saved files and tried again
*** it worked!
[[file:gif/20160924-cv-d.png][20160924-cv-d]]
** [master c62c2e4] removed red h2 -- back to original
** [master 9bcefc2] changed dt font-size to 140%, and removed text-indentation
